<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Phillip Alday, Douglas Bates, and Reinhold Kliegl">
<meta name="dcterms.date" content="2023-09-13">

<title>SMLP2023: Advanced Frequentist Track - Saving data with Arrow</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./sleepstudy.html" rel="next">
<link href="./pkg.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="site_libs/quarto-contrib/jquery-3.6.3/jquery-3.6.3.min.js"></script>
<script src="site_libs/quarto-contrib/code-fullscreen-1.0.0/code-fullscreen.js" defer="true"></script>
<link href="site_libs/quarto-contrib/code-fullscreen-1.0.0/code-fullscreen.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">SMLP2023: Advanced Frequentist Track</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/RePsychLing/SMLP2023" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./useful_packages.html">Getting started with Julia</a></li><li class="breadcrumb-item"><a href="./arrow.html">Saving data with Arrow</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Getting started with Julia</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./useful_packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Useful packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pkg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Package management and reproducible environments</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./arrow.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Saving data with Arrow</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Worked examples</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sleepstudy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis of the sleepstudy data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sleepstudy_speed.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The sleepstudy: Speed - for a change …</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kwdyz11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RePsychLing Kliegl et al.&nbsp;(2011)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kkl15.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RePsychLing Kliegl, Kuschela, &amp; Laubrock (2015)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./largescaledesigned.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A large-scale designed experiment</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Contrast coding</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./contrasts_fggk21.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mixed Models Tutorial: Contrast Coding</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./contrasts_kwdyz11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Contrast Coding of Visual Attention Effects</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glmm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Generalized linear mixed models</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Bootstrap and profiling</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bootstrap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Parametric bootstrap for mixed-effects models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./profiling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Confidence intervals from profiled objective</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kb07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bootstrapping a fitted model</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Visualizations and diagnostics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shrinkageplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">More on shrinkage plots</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AoGPlots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Creating multi-panel plots</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#the-arrow-storage-format" id="toc-the-arrow-storage-format" class="nav-link active" data-scroll-target="#the-arrow-storage-format"><span class="header-section-number">1</span> The Arrow storage format</a></li>
  <li><a href="#the-emotikon-data" id="toc-the-emotikon-data" class="nav-link" data-scroll-target="#the-emotikon-data"><span class="header-section-number">2</span> The Emotikon data</a></li>
  <li><a href="#downloading-and-importing-the-rds-file" id="toc-downloading-and-importing-the-rds-file" class="nav-link" data-scroll-target="#downloading-and-importing-the-rds-file"><span class="header-section-number">3</span> Downloading and importing the RDS file</a></li>
  <li><a href="#avoiding-needless-repetition" id="toc-avoiding-needless-repetition" class="nav-link" data-scroll-target="#avoiding-needless-repetition"><span class="header-section-number">4</span> Avoiding needless repetition</a></li>
  <li><a href="#creating-the-smaller-table" id="toc-creating-the-smaller-table" class="nav-link" data-scroll-target="#creating-the-smaller-table"><span class="header-section-number">5</span> Creating the smaller table</a></li>
  <li><a href="#discovering-patterns-in-the-data" id="toc-discovering-patterns-in-the-data" class="nav-link" data-scroll-target="#discovering-patterns-in-the-data"><span class="header-section-number">6</span> Discovering patterns in the data</a></li>
  <li><a href="#reading-arrow-files-in-other-languages" id="toc-reading-arrow-files-in-other-languages" class="nav-link" data-scroll-target="#reading-arrow-files-in-other-languages"><span class="header-section-number">7</span> Reading Arrow files in other languages</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">8</span> References</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/RePsychLing/SMLP2023/edit/main/arrow.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/RePsychLing/SMLP2023/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Saving data with Arrow</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Phillip Alday, Douglas Bates, and Reinhold Kliegl </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2023-09-13</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="the-arrow-storage-format" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> The Arrow storage format</h1>
<p>The <a href="https://arrow.apache.org">Arrow storage format</a> provides a language-agnostic storage and memory specification for columnar data tables, which just means “something that looks like a data frame in R”. That is, an arrow table is an ordered, named collection of columns, all of the same length.</p>
<p>The columns can be of different types including numeric values, character strings, and factor-like representations - called <em>DictEncoded</em>.</p>
<p>An Arrow file can be read or written from R, Python, Julia and many other languages. Somewhat confusingly in R and Python the name <code>feather</code>, which refers to an earlier version of the storage format, is used in some function names like <code>read_feather</code>.</p>
<p>Internally, the SMLP2023 package uses Arrow to store all of its datasets.</p>
</section>
<section id="the-emotikon-data" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> The Emotikon data</h1>
<p>The <a href="https://github.com/RePsychling/SMLP2021">SMLP2021 repository</a> contains a version of the data from <span class="citation" data-cites="Fuehner2021">Fühner et al. (<a href="#ref-Fuehner2021" role="doc-biblioref">2021</a>)</span> in <code>notebooks/data/fggk21.arrow</code>. After that file was created there were changes in the master RDS file on the <a href="https://osf.io/2d8rj/">osf.io site</a> for the project. We will recreate the Arrow file here then split it into two separate tables, one with a row for each child in the study and one with a row for each test result.</p>
<p>The <code>Arrow</code> package for Julia does not export any function names, which means that the function to read an Arrow file must be called as <code>Arrow.Table</code>. It returns a <em>column table</em>, as described in the <a href="https://github.com/JuliaData/Tables.jl">Tables package</a>. This is like a read-only data frame, which can be easily converted to a full-fledged <code>DataFrame</code> if desired.</p>
<p>This arrangement allows for the <code>Arrow</code> package not to depend on the <code>DataFrames</code> package, which is a heavy-weight dependency, but still easily produce a <code>DataFrame</code> if warranted.</p>
<p>Load the packages to be used.</p>
<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">AlgebraOfGraphics</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Arrow</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">CairoMakie</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Chain</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">DataFrameMacros</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">DataFrames</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Downloads</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">KernelDensity</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">RCall   </span><span class="co"># access R from within Julia</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">StatsBase</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>CairoMakie.<span class="fu">activate!</span>(; <span class="kw">type</span><span class="op">=</span><span class="st">"svg"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">AlgebraOfGraphics</span>: density</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="downloading-and-importing-the-rds-file" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Downloading and importing the RDS file</h1>
<p>This is similar to some of the code shown by Julius Krumbiegel on Monday. In the data directory of the emotikon project on osf.io under Data, the url for the rds data file is found to be [https://osf.io/xawdb/]. Note that we want version 2 of this file.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>fn <span class="op">=</span> <span class="bu">Downloads</span>.<span class="fu">download</span>(<span class="st">"https://osf.io/xawdb/download?version=2"</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dfrm <span class="op">=</span> <span class="fu">rcopy</span>(R<span class="st">"readRDS(</span><span class="sc">$</span>fn<span class="st">)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div><div style="float: left;"><span>525126×7 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">525101 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Cohort</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">School</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Child</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sex</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">age</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Test</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">score</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="CategoricalArrays.CategoricalValue{String, UInt32}">Cat…</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="CategoricalArrays.CategoricalValue{String, UInt32}">Cat…</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="CategoricalArrays.CategoricalValue{String, UInt32}">Cat…</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="CategoricalArrays.CategoricalValue{String, UInt32}">Cat…</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="CategoricalArrays.CategoricalValue{String, UInt32}">Cat…</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">5.26316</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.7</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">125.0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">2.47146</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1053.0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">5.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">4.1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">116.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.76778</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1089.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.54545</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.9</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">111.0</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525115</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.63704</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525116</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">864.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525117</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.65116</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525118</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.8</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525119</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">123.0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525120</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.52889</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525121</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1080.0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525122</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.54545</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525123</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.8</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525124</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">100.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525125</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">2.18506</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525126</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">990.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Now write this file as a Arrow file and read it back in.</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>arrowfn <span class="op">=</span> <span class="fu">joinpath</span>(<span class="st">"data"</span>, <span class="st">"fggk21.arrow"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>Arrow.<span class="fu">write</span>(arrowfn, dfrm; compress<span class="op">=:</span>lz4)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>tbl <span class="op">=</span> Arrow.<span class="fu">Table</span>(arrowfn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>Arrow.Table with 525126 rows, 7 columns, and schema:
 :Cohort  String
 :School  String
 :Child   String
 :Sex     String
 :age     Float64
 :Test    String
 :score   Float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filesize</span>(arrowfn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>3077850</code></pre>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> <span class="fu">DataFrame</span>(tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div><div style="float: left;"><span>525126×7 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">525101 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Cohort</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">School</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Child</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sex</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">age</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Test</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">score</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">5.26316</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.7</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">125.0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">2.47146</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1053.0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">5.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">4.1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">116.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.76778</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1089.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.54545</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.9</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">111.0</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525115</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.63704</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525116</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">864.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525117</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.65116</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525118</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.8</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525119</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">123.0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525120</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.52889</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525121</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1080.0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525122</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.54545</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525123</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.8</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525124</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">100.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525125</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">2.18506</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525126</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">990.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="avoiding-needless-repetition" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Avoiding needless repetition</h1>
<p>One of the principles of relational database design is that information should not be repeated needlessly. Each row of <code>df</code> is determined by a combination of <code>Child</code> and <code>Test</code>, together producing a <code>score</code>, which can be converted to a <code>zScore</code>.</p>
<p>The other columns in the table, <code>Cohort</code>, <code>School</code>, <code>age</code>, and <code>Sex</code>, are properties of the <code>Child</code>.</p>
<p>Storing these values redundantly in the full table takes up space but, more importantly, allows for inconsistency. As it stands, a given <code>Child</code> could be recorded as being in one <code>Cohort</code> for the <code>Run</code> test and in another <code>Cohort</code> for the <code>S20_r</code> test and nothing about the table would detect this as being an error.</p>
<p>The approach used in relational databases is to store the information for <code>score</code> in one table that contains only <code>Child</code>, <code>Test</code> and <code>score</code>, store the information for the <code>Child</code> in another table including <code>Cohort</code>, <code>School</code>, <code>age</code> and <code>Sex</code>. These tables can then be combined to create the table to be used for analysis by <em>joining</em> the different tables together.</p>
<p>The maintainers of the <code>DataFrames</code> package have put in a lot of work over the past few years to make joins quite efficient in Julia. Thus the processing penalty of reassembling the big table from three smaller tables is minimal.</p>
<p>It is important to note that the main advantage of using smaller tables that are joined together to produce the analysis table is the fact that the information in the analysis table is consistent by design.</p>
</section>
<section id="creating-the-smaller-table" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Creating the smaller table</h1>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>Child <span class="op">=</span> <span class="fu">unique</span>(<span class="fu">select</span>(df, <span class="op">:</span>Child, <span class="op">:</span>School, <span class="op">:</span>Cohort, <span class="op">:</span>Sex, <span class="op">:</span>age))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div><div style="float: left;"><span>108295×5 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">108270 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Child</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">School</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Cohort</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sex</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">age</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">C002355</td>
<td style="text-align: left;">S100122</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">C002356</td>
<td style="text-align: left;">S100146</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">C002357</td>
<td style="text-align: left;">S100146</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">C002358</td>
<td style="text-align: left;">S100146</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">C002359</td>
<td style="text-align: left;">S100183</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">C002360</td>
<td style="text-align: left;">S100195</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">C002361</td>
<td style="text-align: left;">S100213</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">C002362</td>
<td style="text-align: left;">S100237</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">C002363</td>
<td style="text-align: left;">S100237</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">C002364</td>
<td style="text-align: left;">S100250</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108284</td>
<td style="text-align: left;">C117943</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108285</td>
<td style="text-align: left;">C117944</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108286</td>
<td style="text-align: left;">C117945</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108287</td>
<td style="text-align: left;">C117946</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108288</td>
<td style="text-align: left;">C117956</td>
<td style="text-align: left;">S400580</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108289</td>
<td style="text-align: left;">C117957</td>
<td style="text-align: left;">S400919</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108290</td>
<td style="text-align: left;">C117958</td>
<td style="text-align: left;">S400919</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108291</td>
<td style="text-align: left;">C117959</td>
<td style="text-align: left;">S400919</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108292</td>
<td style="text-align: left;">C117962</td>
<td style="text-align: left;">S401250</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108293</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108294</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108295</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(Child.Child))  <span class="co"># should be 108295</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>108295</code></pre>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filesize</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  Arrow.<span class="fu">write</span>(<span class="st">"./data/fggk21_Child.arrow"</span>, Child; compress<span class="op">=:</span>lz4)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>1774946</code></pre>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filesize</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  Arrow.<span class="fu">write</span>(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"./data/fggk21_Score.arrow"</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(df, <span class="op">:</span>Child, <span class="op">:</span><span class="bu">Test</span>, <span class="op">:</span>score);</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    compress<span class="op">=:</span>lz4,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>2794058</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>A careful examination of the file sizes versus that of <code>./data/fggk21.arrow</code> will show that the separate tables combined take up more space than the original because of the compression. Compression algorithms are often more successful when applied to larger files.</p>
</div>
</div>
<p>Now read the Arrow tables in and reassemble the original table.</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>Score <span class="op">=</span> <span class="fu">DataFrame</span>(Arrow.<span class="fu">Table</span>(<span class="st">"./data/fggk21_Score.arrow"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<div><div style="float: left;"><span>525126×3 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">525101 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Child</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Test</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">score</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">5.26316</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.7</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">125.0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">2.47146</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1053.0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">5.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">4.1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">116.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.76778</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1089.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.54545</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.9</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">111.0</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525115</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.63704</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525116</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">864.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525117</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.65116</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525118</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.8</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525119</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">123.0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525120</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.52889</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525121</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1080.0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525122</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.54545</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525123</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.8</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525124</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">100.0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525125</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">2.18506</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525126</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">990.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>At this point we can create the z-score column by standardizing the scores for each <code>Test</code>. The code to do this follows Julius’s presentation on Monday.</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@transform</span>!(<span class="fu">groupby</span>(Score, <span class="op">:</span><span class="bu">Test</span>), <span class="op">:</span>zScore <span class="op">=</span> <span class="pp">@bycol</span> <span class="fu">zscore</span>(<span class="op">:</span>score))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div><div style="float: left;"><span>525126×4 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">525101 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Child</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Test</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">score</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">zScore</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">5.26316</td>
<td style="text-align: right;">1.7913</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.7</td>
<td style="text-align: right;">-0.0622317</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">125.0</td>
<td style="text-align: right;">-0.0336567</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">2.47146</td>
<td style="text-align: right;">1.46874</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1053.0</td>
<td style="text-align: right;">0.331058</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">1.15471</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">4.1</td>
<td style="text-align: right;">0.498354</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">116.0</td>
<td style="text-align: right;">-0.498822</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.76778</td>
<td style="text-align: right;">-0.9773</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1089.0</td>
<td style="text-align: right;">0.574056</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.54545</td>
<td style="text-align: right;">0.0551481</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.9</td>
<td style="text-align: right;">0.218061</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">111.0</td>
<td style="text-align: right;">-0.757248</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525115</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.63704</td>
<td style="text-align: right;">-1.43175</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525116</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">864.0</td>
<td style="text-align: right;">-0.944681</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525117</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.65116</td>
<td style="text-align: right;">0.31086</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525118</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.8</td>
<td style="text-align: right;">0.0779146</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525119</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">123.0</td>
<td style="text-align: right;">-0.137027</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525120</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.52889</td>
<td style="text-align: right;">-1.8077</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525121</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1080.0</td>
<td style="text-align: right;">0.513306</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525122</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.54545</td>
<td style="text-align: right;">0.0551481</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525123</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.8</td>
<td style="text-align: right;">0.0779146</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525124</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">100.0</td>
<td style="text-align: right;">-1.32578</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525125</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">2.18506</td>
<td style="text-align: right;">0.473217</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525126</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">990.0</td>
<td style="text-align: right;">-0.0941883</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>Child <span class="op">=</span> <span class="fu">DataFrame</span>(Arrow.<span class="fu">Table</span>(<span class="st">"./data/fggk21_Child.arrow"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<div><div style="float: left;"><span>108295×5 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">108270 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Child</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">School</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Cohort</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sex</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">age</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">C002355</td>
<td style="text-align: left;">S100122</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">C002356</td>
<td style="text-align: left;">S100146</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">C002357</td>
<td style="text-align: left;">S100146</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">C002358</td>
<td style="text-align: left;">S100146</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">C002359</td>
<td style="text-align: left;">S100183</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">C002360</td>
<td style="text-align: left;">S100195</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">C002361</td>
<td style="text-align: left;">S100213</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">C002362</td>
<td style="text-align: left;">S100237</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">C002363</td>
<td style="text-align: left;">S100237</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">C002364</td>
<td style="text-align: left;">S100250</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108284</td>
<td style="text-align: left;">C117943</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108285</td>
<td style="text-align: left;">C117944</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108286</td>
<td style="text-align: left;">C117945</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108287</td>
<td style="text-align: left;">C117946</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108288</td>
<td style="text-align: left;">C117956</td>
<td style="text-align: left;">S400580</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108289</td>
<td style="text-align: left;">C117957</td>
<td style="text-align: left;">S400919</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108290</td>
<td style="text-align: left;">C117958</td>
<td style="text-align: left;">S400919</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108291</td>
<td style="text-align: left;">C117959</td>
<td style="text-align: left;">S400919</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108292</td>
<td style="text-align: left;">C117962</td>
<td style="text-align: left;">S401250</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108293</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108294</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108295</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> <span class="fu">disallowmissing!</span>(<span class="fu">leftjoin</span>(Score, Child; on<span class="op">=:</span>Child))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<div><div style="float: left;"><span>525126×8 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">525101 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Child</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Test</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">score</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">zScore</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">School</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Cohort</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sex</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">age</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">5.26316</td>
<td style="text-align: right;">1.7913</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.7</td>
<td style="text-align: right;">-0.0622317</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">125.0</td>
<td style="text-align: right;">-0.0336567</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">2.47146</td>
<td style="text-align: right;">1.46874</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1053.0</td>
<td style="text-align: right;">0.331058</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">1.15471</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">4.1</td>
<td style="text-align: right;">0.498354</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">116.0</td>
<td style="text-align: right;">-0.498822</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.76778</td>
<td style="text-align: right;">-0.9773</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1089.0</td>
<td style="text-align: right;">0.574056</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.54545</td>
<td style="text-align: right;">0.0551481</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.9</td>
<td style="text-align: right;">0.218061</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">111.0</td>
<td style="text-align: right;">-0.757248</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525115</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.63704</td>
<td style="text-align: right;">-1.43175</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525116</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">864.0</td>
<td style="text-align: right;">-0.944681</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525117</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.65116</td>
<td style="text-align: right;">0.31086</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525118</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.8</td>
<td style="text-align: right;">0.0779146</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525119</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">123.0</td>
<td style="text-align: right;">-0.137027</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525120</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">1.52889</td>
<td style="text-align: right;">-1.8077</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525121</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">1080.0</td>
<td style="text-align: right;">0.513306</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525122</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">S20_r</td>
<td style="text-align: right;">4.54545</td>
<td style="text-align: right;">0.0551481</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525123</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">BPT</td>
<td style="text-align: right;">3.8</td>
<td style="text-align: right;">0.0779146</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525124</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">SLJ</td>
<td style="text-align: right;">100.0</td>
<td style="text-align: right;">-1.32578</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525125</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">Star_r</td>
<td style="text-align: right;">2.18506</td>
<td style="text-align: right;">0.473217</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">525126</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">Run</td>
<td style="text-align: right;">990.0</td>
<td style="text-align: right;">-0.0941883</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The call to <code>disallowmissing!</code> is because the join will create columns that allow for missing values but we know that we should not get missing values in the result. This call will fail if, for some reason, missing values were created.</p>
</div>
</div>
</section>
<section id="discovering-patterns-in-the-data" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Discovering patterns in the data</h1>
<p>One of the motivations for creating the <code>Child</code> table was to be able to bin the ages according to the age of each child, not the age of each <code>Child-Test</code> combination. Not all children have all 5 test results. We can check the number of results by grouping on <code>:Child</code> and evaluate the number of rows in each group.</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>nobsChild <span class="op">=</span> <span class="fu">combine</span>(<span class="fu">groupby</span>(Score, <span class="op">:</span>Child), nrow <span class="op">=&gt;</span> <span class="op">:</span>ntest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<div><div style="float: left;"><span>108295×2 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">108270 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Child</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ntest</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">C002355</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">C002356</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">C002357</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">C002358</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">C002359</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">C002360</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">C002361</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">C002362</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">C002363</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">C002364</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108284</td>
<td style="text-align: left;">C117943</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108285</td>
<td style="text-align: left;">C117944</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108286</td>
<td style="text-align: left;">C117945</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108287</td>
<td style="text-align: left;">C117946</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108288</td>
<td style="text-align: left;">C117956</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108289</td>
<td style="text-align: left;">C117957</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108290</td>
<td style="text-align: left;">C117958</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108291</td>
<td style="text-align: left;">C117959</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108292</td>
<td style="text-align: left;">C117962</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108293</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108294</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">108295</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: right;">5</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Now create a table of the number of children with 1, 2, …, 5 test scores.</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">combine</span>(<span class="fu">groupby</span>(nobsChild, <span class="op">:</span>ntest), nrow)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<div><div style="float: left;"><span>5×2 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ntest</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">nrow</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">462</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">729</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1739</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">8836</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">96529</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A natural question at this point is whether there is something about those students who have few observations. For example, are they from only a few schools?</p>
<p>One approach to examining properties like is to add the number of observations for each child to the :Child table. Later we can group the table according to this <code>:ntest</code> to look at properties of <code>:Child</code> by <code>:ntest</code>.</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>gdf <span class="op">=</span> <span class="fu">groupby</span>(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">disallowmissing!</span>(<span class="fu">leftjoin</span>(Child, nobsChild; on<span class="op">=:</span>Child)), <span class="op">:</span>ntest</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<p><b>GroupedDataFrame with 5 groups based on key: ntest</b></p><div><div style="float: left;"><span>First Group (462 rows): ntest = 1</span></div><div style="float: right;"><span style="font-style: italic;">437 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Child</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">School</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Cohort</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sex</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">age</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ntest</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">C002452</td>
<td style="text-align: left;">S101175</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">C002625</td>
<td style="text-align: left;">S103329</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">C002754</td>
<td style="text-align: left;">S104814</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">C003269</td>
<td style="text-align: left;">S102258</td>
<td style="text-align: left;">2012</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99726</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">C003599</td>
<td style="text-align: left;">S105843</td>
<td style="text-align: left;">2012</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99726</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">C003807</td>
<td style="text-align: left;">S100754</td>
<td style="text-align: left;">2011</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">8.0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">C003985</td>
<td style="text-align: left;">S102945</td>
<td style="text-align: left;">2011</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">8.0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">C004086</td>
<td style="text-align: left;">S104255</td>
<td style="text-align: left;">2011</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">8.0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">C004657</td>
<td style="text-align: left;">S101400</td>
<td style="text-align: left;">2014</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">8.03833</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">C005036</td>
<td style="text-align: left;">S105909</td>
<td style="text-align: left;">2014</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">8.03833</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">C005440</td>
<td style="text-align: left;">S101023</td>
<td style="text-align: left;">2019</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">8.05202</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">C005523</td>
<td style="text-align: left;">S101825</td>
<td style="text-align: left;">2019</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">8.05202</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">C005697</td>
<td style="text-align: left;">S103615</td>
<td style="text-align: left;">2019</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">8.05202</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">451</td>
<td style="text-align: left;">C112638</td>
<td style="text-align: left;">S103718</td>
<td style="text-align: left;">2015</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.0486</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">452</td>
<td style="text-align: left;">C114749</td>
<td style="text-align: left;">S112938</td>
<td style="text-align: left;">2017</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.06502</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">453</td>
<td style="text-align: left;">C115460</td>
<td style="text-align: left;">S101953</td>
<td style="text-align: left;">2015</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.08145</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">454</td>
<td style="text-align: left;">C115569</td>
<td style="text-align: left;">S100572</td>
<td style="text-align: left;">2017</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.08419</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">455</td>
<td style="text-align: left;">C115587</td>
<td style="text-align: left;">S100754</td>
<td style="text-align: left;">2017</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.08419</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">456</td>
<td style="text-align: left;">C117108</td>
<td style="text-align: left;">S103196</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">457</td>
<td style="text-align: left;">C117229</td>
<td style="text-align: left;">S103615</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">458</td>
<td style="text-align: left;">C117230</td>
<td style="text-align: left;">S103615</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">459</td>
<td style="text-align: left;">C117419</td>
<td style="text-align: left;">S104954</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">460</td>
<td style="text-align: left;">C117437</td>
<td style="text-align: left;">S105004</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">461</td>
<td style="text-align: left;">C117539</td>
<td style="text-align: left;">S105636</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">462</td>
<td style="text-align: left;">C117659</td>
<td style="text-align: left;">S106483</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
<p>⋮</p>
<div>
<div style="float: left;">
<span>Last Group (96529 rows): ntest = 5</span>
</div>
<div style="float: right;">
<span style="font-style: italic;">96504 rows omitted</span>
</div>
<div style="clear: both;">

</div>
</div>
<div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Child</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">School</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Cohort</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sex</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">age</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ntest</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">C002352</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">C002353</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">C002354</td>
<td style="text-align: left;">S100067</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">C002355</td>
<td style="text-align: left;">S100122</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">C002356</td>
<td style="text-align: left;">S100146</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">C002357</td>
<td style="text-align: left;">S100146</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">C002358</td>
<td style="text-align: left;">S100146</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">C002360</td>
<td style="text-align: left;">S100195</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">C002362</td>
<td style="text-align: left;">S100237</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">C002363</td>
<td style="text-align: left;">S100237</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">C002364</td>
<td style="text-align: left;">S100250</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">C002365</td>
<td style="text-align: left;">S100304</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">C002366</td>
<td style="text-align: left;">S100304</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7.99452</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">96518</td>
<td style="text-align: left;">C117942</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">96519</td>
<td style="text-align: left;">C117943</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">96520</td>
<td style="text-align: left;">C117944</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">96521</td>
<td style="text-align: left;">C117945</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">96522</td>
<td style="text-align: left;">C117946</td>
<td style="text-align: left;">S130539</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">96523</td>
<td style="text-align: left;">C117956</td>
<td style="text-align: left;">S400580</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">96524</td>
<td style="text-align: left;">C117958</td>
<td style="text-align: left;">S400919</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">96525</td>
<td style="text-align: left;">C117959</td>
<td style="text-align: left;">S400919</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">96526</td>
<td style="text-align: left;">C117962</td>
<td style="text-align: left;">S401250</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">96527</td>
<td style="text-align: left;">C117964</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">96528</td>
<td style="text-align: left;">C117965</td>
<td style="text-align: left;">S401470</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">96529</td>
<td style="text-align: left;">C117966</td>
<td style="text-align: left;">S800200</td>
<td style="text-align: left;">2018</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">9.10609</td>
<td style="text-align: right;">5</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>Are the sexes represented more-or-less equally?</p>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">combine</span>(<span class="fu">groupby</span>(<span class="fu">first</span>(gdf), <span class="op">:</span>Sex), nrow <span class="op">=&gt;</span> <span class="op">:</span>nchild)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div><div style="float: left;"><span>2×2 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sex</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">nchild</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">230</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">232</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">combine</span>(<span class="fu">groupby</span>(<span class="fu">last</span>(gdf), <span class="op">:</span>Sex), nrow <span class="op">=&gt;</span> <span class="op">:</span>nchild)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<div><div style="float: left;"><span>2×2 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sex</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">nchild</th>
</tr>
<tr class="odd subheader headerLastRow">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String">String</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">47552</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">48977</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="reading-arrow-files-in-other-languages" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Reading Arrow files in other languages</h1>
<p>There are Arrow implementations for R (the <code>arrow</code> package) and for Python (<code>pyarrow</code>).</p>
<pre class="{python}"><code>#| eval: false
import pyarrow.feather: read_table
read_table("./data/fggk21.arrow")</code></pre>
<pre class="{R}"><code>#| eval: false
library("arrow")
fggk21 &lt;- read_feather("./data/fggk21.arrow")
nrow(fggk21)</code></pre>
</section>
<section id="references" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> References</h1>
<div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="list">
<div id="ref-Fuehner2021" class="csl-entry" role="listitem">
Fühner, T., Granacher, U., Golle, K., &amp; Kliegl, R. (2021). Age and sex effects in physical fitness components of 108,295 third graders including 515 primary schools and 9 cohorts. <em>Scientific Reports</em>, <em>11</em>(1). <a href="https://doi.org/10.1038/s41598-021-97000-4">https://doi.org/10.1038/s41598-021-97000-4</a>
</div>
</div>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./pkg.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Package management and reproducible environments</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./sleepstudy.html" class="pagination-link">
        <span class="nav-page-text">Analysis of the sleepstudy data</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>